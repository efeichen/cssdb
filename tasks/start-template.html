<!doctype html>
<title>cssdb</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@jon_neal">
<meta property="og:title" content="CSS Database">
<meta property="og:description" content="A comprehensive list of CSS features and their positions in the process of becoming implemented web standards.">
<meta property="og:image" content="https://cssdb.org/cssdb.jpg">
<meta property="og:site_name" content="cssdb">
<meta property="og:type" content="website">
<meta property="og:url" content="https://cssdb.org/">
<link href="favicon.ico" rel="shortcut icon">
<link rel="stylesheet" href="https://dev.mavo.io/dist/mavo.css">
<link href="style.css" rel="stylesheet">

<header class="cssdb-header">
	<img class="cssdb-header-branding" src="cssdb.svg" alt="cssdb logo" width="90" height="90">
	<div class="cssdb-header-heading">
		<h1 class="cssdb-header-title">
			Whatâ€™s next for CSS?
		</h1>
		<p class="cssdb-header-description">
			<strong>cssdb</strong> is a comprehensive list of CSS features and their positions in the process of becoming implemented web standards.
		</p>
	</div>
	<a class="cssdb-header-link" href="#staging-process">What are the stages?</a>
</header>

<main class="cssdb-features mv-autoedit" id="features" mv-app mv-storage="https://github.com/csstools/cssdb/blob/master/cssdb.json" mv-plugins="markdown">
	${features.map(feature => `<section class="cssdb-feature" property="feature" id="[id]" mv-multiple>
		<header class="cssdb-feature-header">
			<img class="cssdb-feature-stage" src="stage-[stage].svg" alt="" width="62" height="62">
			<div class="cssdb-feature-header-content">
				<h2 class="cssdb-feature-heading">
					<a href="#[id]" style="float:left" mv-attribute="none"><span class="markdown" property="title"></span></a>
					<p class="mv-logged-in" style="float:left; margin-left:15px">ID: (<span property="id"></span>)</p>
				</h2>
				<p class="cssdb-feature-description" property="description"></p>
			</div>
			<p class="mv-logged-in"><strong>Stage: </strong><span property="stage" mv-edit="#stages"></span></p>
			<div hidden>
				<select id="stages">
					<option value="4">Standardized</option>
					<option value="3">Embraced</option>
					<option value="2">Allowable</option>
					<option value="1">Experimental</option>
					<option value="0">Aspirational</option>
					<option value="X">Rejected</option>
				</select>
			</div>
		</header>
		<div class="cssdb-feature-content">
			<p class="cssdb-feature-specification">
				<a class="cssdb-feature-specification-link mv-logged-out" href="[specification]">
					Specification
					<a class="mv-logged-in" mv-attribute="none" property="specification"></a>
					<!-- Just need 5 SVGs and use Mavo expressions to dictate which one'll show? -->
					<a class="cssdb-feature-specification-badge-link" href="badge/[id].svg" tabindex="-1">
						<img src="badge/[id].svg" class="cssdb-feature-specification-badge" alt="Stage [stage] badge">
					</a>
				</a>
			</p>
			<div>
				<pre class="cssdb-feature-example mv-logged-in " property="example"></pre>
				<pre class="cssdb-feature-example mv-logged-out">${feature.example}</pre>		
			</div>
			<p class="mv-logged-in">https://caniuse.com/<span property="caniuse"></span></p>
			${feature.caniuse
				? `<a class="cssdb-feature-caniuse" href="https://caniuse.com/#[caniuse]" target="_blank" aria-label="can i use browser support">
					${Object.keys(feature.caniuse.stats).map(
						id => `<span class="cssdb-browser cssdb-browser--${id}" aria-hidden="true">${Object.keys(feature.caniuse.stats[id]).filter(
							version => feature.caniuse.stats[id][version].indexOf('y') === 0
						).slice(0, 1).map(
							version => version.replace(/(\.0)?(-.+)?$/, '')
						).map(
							version => `<span class="cssdb-browser-version">${version}</span>`
						)}</span>`
					)}
				</a>`
				: ''
			}
			<div class="cssdb-feature-polyfills">
					Use with a
					<ul class="cssdb-feature-polyfill-list">						
						<li class="cssdb-feature-polyfill-item" property="polyfills" mv-multiple>
							<a class="cssdb-feature-polyfill-link" href="[link]">
								<span property="type"></span>
							</a>
							<span class="mv-logged-in">(<span property="link"></span>)</span>
						</li>
					</ul>
			</div>
		</div>
	</section>`)}
</main>

<aside class="cssdb-process">
	${staging}
</aside>

<p>
	Want to contribute? Checkout the
	<a href="https://github.com/csstools/cssdb">cssdb on GitHub</a>
</p>

<script src="https://dev.mavo.io/dist/mavo.js"></script>
<script>
document.addEventListener('click', function (event) {
	var closestHash = event.target.closest('a[href^="#"]');

	if (closestHash) {
		var target = document.getElementById(closestHash.hash.slice(1));
		var easing = function (t) {
			return t * (2 - t);
		};

		if (target) {
			event.preventDefault();

			scrollTo(target, 300, easing, function () {
				location.hash = closestHash.hash;
			});
		}
	}
});

function scrollTo(target, duration, easing, callback) {
	var start = window.pageYOffset;
	var startTime = 'now' in window.performance ? performance.now() : new Date().getTime();

	var documentHeight = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);
	var windowHeight = window.innerHeight || document.documentElement.clientHeight || document.getElementsByTagName('body')[0].clientHeight;
	var targetOffset = typeof target === 'number' ? target : target.offsetTop;
	var targetOffsetToScroll = Math.round(documentHeight - targetOffset < windowHeight ? documentHeight - windowHeight : targetOffset);

	scroll();

	function scroll() {
		var now = 'now' in window.performance ? performance.now() : new Date().getTime();
		var time = Math.min(1, ((now - startTime) / duration));
		var timeFunction = easing(time);

		window.scroll(0, Math.ceil((timeFunction * (targetOffsetToScroll - start)) + start));

		if (window.pageYOffset !== targetOffsetToScroll) {
			requestAnimationFrame(scroll);
		} else {
			window.scroll(0, start);

			callback();
		}
	}
}
</script>
